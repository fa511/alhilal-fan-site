document.addEventListener('DOMContentLoaded', () => {
    const registrationForm = document.getElementById('registrationForm');
    const submitAnswerButton = document.getElementById('submitAnswer');
    const questionDiv = document.getElementById('question');
    const choicesDiv = document.getElementById('choices');
    const feedbackDiv = document.getElementById('feedback');
    const topFansOl = document.getElementById('topFans');
    const quizSection = document.getElementById('quiz');

    let questions = [
        { question: "متى تأسس نادي الهلال؟", answer: "1957", choices: ["1957", "1960", "1953", "1955"] },
        { question: "ما هو لقب نادي الهلال؟", answer: "الزعيم", choices: ["الزعيم", "العميد", "الملكي", "الأسطورة"] },
        { question: "ما هي ألوان شعار نادي الهلال؟", answer: "الأزرق والأبيض", choices: ["الأزرق والأبيض", "الأحمر والأسود", "الأخضر والأبيض", "الأصفر والأزرق"] },
        { question: "ما هو اسم ملعب نادي الهلال؟", answer: "ملعب جامعة الملك سعود", choices: ["ملعب جامعة الملك سعود", "استاد الملك فهد", "استاد الأمير فيصل بن فهد", "استاد الأمير محمد بن فهد"] },
        { question: "كم عدد بطولات الدوري التي حققها الهلال؟", answer: "16", choices: ["16", "15", "14", "13"] },
        { question: "ما هو النادي الذي يعتبر المنافس التقليدي لنادي الهلال؟", answer: "النصر", choices: ["النصر", "الاتحاد", "الأهلي", "الشباب"] },
        { question: "من هو رئيس نادي الهلال الحالي؟", answer: "فهد بن نافل", choices: ["فهد بن نافل", "محمد بن فيصل", "عبد الله الجربوع", "سامي الجابر"] },
        { question: "كم مرة فاز الهلال بكأس ولي العهد؟", answer: "13", choices: ["13", "12", "14", "15"] },
        { question: "ما هو أكبر فوز حققه نادي الهلال في تاريخه؟", answer: "10-0", choices: ["10-0", "9-0", "8-0", "7-0"] },
        { question: "ما هو أكبر خسارة تعرض لها نادي الهلال؟", answer: "0-5", choices: ["0-5", "1-4", "0-4", "2-5"] },
        { question: "ما هو العام الذي حقق فيه الهلال أول بطولة دوري؟", answer: "1977", choices: ["1977", "1976", "1978", "1979"] },
        { question: "من هو اللاعب الذي يحمل الرقم 10 في نادي الهلال؟", answer: "سالم الدوسري", choices: ["سالم الدوسري", "محمد الشلهوب", "نواف العابد", "ياسر القحطاني"] },
        { question: "كم عدد البطولات الآسيوية التي حققها الهلال؟", answer: "7", choices: ["7", "6", "5", "8"] },
        { question: "من هو قائد نادي الهلال الحالي؟", answer: "سلمان الفرج", choices: ["سلمان الفرج", "محمد الشلهوب", "ياسر القحطاني", "عبد الله عطيف"] },
        { question: "من هو المدرب الحالي لنادي الهلال؟", answer: "رامون دياز", choices: ["رامون دياز", "جيسوس", "زوران ماميتش", "رازفان لوشيسكو"] },
        { question: "ما هو أكثر موسم سجل فيه الهلال أهدافاً؟", answer: "2019-2020", choices: ["2019-2020", "2018-2019", "2017-2018", "2020-2021"] },
        { question: "من هو أكثر لاعب سجل أهدافاً لنادي الهلال؟", answer: "يوسف الثنيان", choices: ["يوسف الثنيان", "سامي الجابر", "ياسر القحطاني", "بافيتيمبي غوميز"] },
        { question: "كم مرة فاز الهلال بدوري أبطال آسيا؟", answer: "4", choices: ["4", "3", "5", "6"] },
        { question: "من هو هداف الهلال في دوري المحترفين السعودي؟", answer: "بافيتيمبي غوميز", choices: ["بافيتيمبي غوميز", "ياسر القحطاني", "ناصر الشمراني", "سالم الدوسري"] },
        { question: "من هو اللاعب الأكثر مشاركة في تاريخ الهلال؟", answer: "محمد الدعيع", choices: ["محمد الدعيع", "سامي الجابر", "ياسر القحطاني", "محمد الشلهوب"] },
        // إضافة المزيد من الأسئلة لتكون 100 سؤال
        { question: "ما هو اسم أول رئيس لنادي الهلال؟", answer: "عبد الرحمن بن سعيد", choices: ["عبد الرحمن بن سعيد", "محمد بن فيصل", "فهد بن نافل", "سامي الجابر"] },
        { question: "ما هو عدد البطولات الإجمالية التي حققها نادي الهلال؟", answer: "65", choices: ["65", "60", "55", "70"] },
        { question: "ما هو اسم أول مدرب لنادي الهلال؟", answer: "عبد الرحمن بن سعيد", choices: ["عبد الرحمن بن سعيد", "محمد بن فيصل", "فهد بن نافل", "سامي الجابر"] },
        { question: "ما هو أول ملعب استخدمه نادي الهلال؟", answer: "ملعب الصائغ", choices: ["ملعب الصائغ", "استاد الملك فهد", "استاد الأمير فيصل بن فهد", "ملعب جامعة الملك سعود"] },
        { question: "من هو اللاعب الذي سجل أول هدف في تاريخ نادي الهلال؟", answer: "مبارك عبد الكريم", choices: ["مبارك عبد الكريم", "يوسف الثنيان", "سامي الجابر", "ياسر القحطاني"] },
        { question: "ما هو أول موسم شارك فيه الهلال في الدوري السعودي؟", answer: "1976-1977", choices: ["1976-1977", "1977-1978", "1978-1979", "1979-1980"] },
        { question: "ما هو ترتيب الهلال في أول موسم دوري شارك فيه؟", answer: "الثاني", choices: ["الثاني", "الأول", "الثالث", "الرابع"] },
        { question: "من هو أول لاعب أجنبي انضم لنادي الهلال؟", answer: "أديموس", choices: ["أديموس", "بافيتيمبي غوميز", "رادوي", "نيفيز"] },
        { question: "ما هو عدد الأهداف التي سجلها الهلال في أول موسم دوري؟", answer: "40", choices: ["40", "45", "50", "55"] },
        { question: "من هو اللاعب الذي يحمل الرقم 7 في نادي الهلال؟", answer: "ياسر القحطاني", choices: ["ياسر القحطاني", "سالم الدوسري", "محمد الشلهوب", "نواف العابد"] },
        { question: "ما هو أكبر عدد من الأهداف سجله الهلال في مباراة واحدة؟", answer: "10", choices: ["10", "9", "8", "7"] },
        { question: "ما هو أكبر عدد من الأهداف استقبلها الهلال في مباراة واحدة؟", answer: "5", choices: ["5", "4", "6", "3"] },
        { question: "من هو اللاعب الذي سجل أكثر عدد من الأهداف في موسم واحد لنادي الهلال؟", answer: "عمر خربين", choices: ["عمر خربين", "سامي الجابر", "ياسر القحطاني", "بافيتيمبي غوميز"] },
        { question: "ما هو أول موسم فاز فيه الهلال بكأس الملك؟", answer: "1962", choices: ["1962", "1963", "1964", "1965"] },
        { question: "من هو اللاعب الذي سجل أول هدف للهلال في دوري أبطال آسيا؟", answer: "سامي الجابر", choices: ["سامي الجابر", "يوسف الثنيان", "ياسر القحطاني", "نواف العابد"] },
        { question: "ما هو أول موسم فاز فيه الهلال بدوري أبطال آسيا؟", answer: "1991", choices: ["1991", "1992", "1993", "1994"] },
        { question: "من هو اللاعب الذي سجل هدف الفوز في نهائي دوري أبطال آسيا 2000؟", answer: "سامي الجابر", choices: ["سامي الجابر", "يوسف الثنيان", "ياسر القحطاني", "نواف العابد"] },
        { question: "كم عدد المباريات التي لعبها الهلال في دوري أبطال آسيا 2019؟", answer: "13", choices: ["13", "14", "15", "12"] },
        { question: "من هو اللاعب الذي سجل أكثر عدد من الأهداف في دوري أبطال آسيا 2019؟", answer: "بافيتيمبي غوميز", choices: ["بافيتيمبي غوميز", "ياسر القحطاني", "ناصر الشمراني", "سالم الدوسري"] },
        { question: "ما هو عدد الأهداف التي سجلها الهلال في دوري أبطال آسيا 2019؟", answer: "23", choices: ["23", "24", "25", "22"] },
        { question: "ما هو عدد الأهداف التي سجلها يوسف الثنيان في مسيرته مع الهلال؟", answer: "228", choices: ["228", "220", "230", "235"] },
        { question: "من هو اللاعب الذي يحمل الرقم 9 في نادي الهلال؟", answer: "بافيتيمبي غوميز", choices: ["بافيتيمبي غوميز", "ياسر القحطاني", "ناصر الشمراني", "سامي الجابر"] },
        { question: "ما هو عدد الأهداف التي سجلها سامي الجابر في مسيرته مع الهلال؟", answer: "173", choices: ["173", "170", "175", "180"] },
        { question: "من هو اللاعب الذي سجل هدف الفوز في نهائي دوري أبطال آسيا 2019؟", answer: "سالم الدوسري", choices: ["سالم الدوسري", "بافيتيمبي غوميز", "ياسر القحطاني", "ناصر الشمراني"] },
        { question: "ما هو عدد الأهداف التي سجلها عمر خربين في دوري أبطال آسيا 2017؟", answer: "10", choices: ["10", "9", "11", "12"] },
        { question: "من هو اللاعب الذي سجل هدف الفوز في نهائي دوري أبطال آسيا 2017؟", answer: "عمر خربين", choices: ["عمر خربين", "سالم الدوسري", "ياسر القحطاني", "ناصر الشمراني"] },
        { question: "ما هو عدد المباريات التي لعبها محمد الدعيع مع الهلال؟", answer: "273", choices: ["273", "270", "275", "280"] },
        { question: "ما هو عدد الأهداف التي سجلها ياسر القحطاني في مسيرته مع الهلال؟", answer: "136", choices: ["136", "130", "140", "145"] },
        { question: "من هو اللاعب الذي سجل أكثر عدد من الأهداف في موسم واحد في تاريخ الهلال؟", answer: "عمر خربين", choices: ["عمر خربين", "بافيتيمبي غوميز", "ياسر القحطاني", "سامي الجابر"] },
        { question: "ما هو عدد الأهداف التي سجلها ناصر الشمراني في مسيرته مع الهلال؟", answer: "54", choices: ["54", "50", "55", "60"] },
        { question: "من هو اللاعب الذي سجل هدف الفوز في نهائي دوري أبطال آسيا 2014؟", answer: "ناصر الشمراني", choices: ["ناصر الشمراني", "سالم الدوسري", "ياسر القحطاني", "سامي الجابر"] },
        { question: "ما هو عدد الأهداف التي سجلها كارلوس إدواردو في مسيرته مع الهلال؟", answer: "75", choices: ["75", "70", "80", "85"] },
        { question: "من هو اللاعب الذي سجل هدف الفوز في نهائي كأس الملك 2015؟", answer: "محمد الشلهوب", choices: ["محمد الشلهوب", "ياسر القحطاني", "نواف العابد", "سالم الدوسري"] },
        { question: "ما هو عدد المباريات التي لعبها نواف العابد مع الهلال؟", answer: "194", choices: ["194", "190", "195", "200"] },
        { question: "من هو اللاعب الذي سجل أكثر عدد من الأهداف في موسم واحد في الدوري السعودي؟", answer: "ماجد عبد الله", choices: ["ماجد عبد الله", "سامي الجابر", "ياسر القحطاني", "ناصر الشمراني"] },
        { question: "ما هو عدد الأهداف التي سجلها ماجد عبد الله في الدوري السعودي؟", answer: "189", choices: ["189", "180", "190", "200"] },
        { question: "من هو اللاعب الذي سجل هدف الفوز في نهائي كأس ولي العهد 2016؟", answer: "محمد البريك", choices: ["محمد البريك", "ياسر القحطاني", "نواف العابد", "سالم الدوسري"] },
        { question: "ما هو عدد الأهداف التي سجلها سالم الدوسري في دوري أبطال آسيا 2019؟", answer: "4", choices: ["4", "5", "6", "3"] },
        { question: "من هو اللاعب الذي سجل هدف الفوز في نهائي كأس الملك 2017؟", answer: "ياسر الشهراني", choices: ["ياسر الشهراني", "ياسر القحطاني", "نواف العابد", "سالم الدوسري"] },
        { question: "ما هو عدد المباريات التي لعبها سلمان الفرج مع الهلال؟", answer: "210", choices: ["210", "200", "220", "230"] },
        { question: "ما هو عدد المباريات التي لعبها ياسر الشهراني مع الهلال؟", answer: "215", choices: ["215", "210", "220", "225"] },
        { question: "ما هو عدد الأهداف التي سجلها محمد الشلهوب في مسيرته مع الهلال؟", answer: "100", choices: ["100", "95", "105", "110"] },
        { question: "من هو اللاعب الذي سجل هدف الفوز في نهائي دوري أبطال آسيا 2000؟", answer: "سامي الجابر", choices: ["سامي الجابر", "يوسف الثنيان", "ياسر القحطاني", "نواف العابد"] },
        { question: "ما هو عدد الأهداف التي سجلها بافيتيمبي غوميز في دوري أبطال آسيا 2019؟", answer: "11", choices: ["11", "10", "12", "13"] },
        { question: "من هو اللاعب الذي سجل هدف الفوز في نهائي كأس الملك 2019؟", answer: "سالم الدوسري", choices: ["سالم الدوسري", "بافيتيمبي غوميز", "ياسر القحطاني", "ناصر الشمراني"] },
        { question: "ما هو عدد المباريات التي لعبها عبد الله عطيف مع الهلال؟", answer: "182", choices: ["182", "180", "185", "190"] },
        { question: "ما هو عدد الأهداف التي سجلها ناصر الدوسري في مسيرته مع الهلال؟", answer: "5", choices: ["5", "4", "6", "7"] },
        { question: "من هو اللاعب الذي سجل هدف الفوز في نهائي دوري أبطال آسيا 2014؟", answer: "ناصر الشمراني", choices: ["ناصر الشمراني", "سالم الدوسري", "ياسر القحطاني", "سامي الجابر"] },
        { question: "ما هو عدد الأهداف التي سجلها كارلوس إدواردو في دوري المحترفين السعودي؟", answer: "51", choices: ["51", "50", "52", "53"] },
        { question: "من هو اللاعب الذي سجل هدف الفوز في نهائي كأس ولي العهد 2015؟", answer: "محمد الشلهوب", choices: ["محمد الشلهوب", "ياسر القحطاني", "نواف العابد", "سالم الدوسري"] },
        { question: "ما هو عدد المباريات التي لعبها نواف العابد في دوري المحترفين السعودي؟", answer: "150", choices: ["150", "145", "155", "160"] },
        { question: "ما هو عدد الأهداف التي سجلها سالم الدوسري في دوري المحترفين السعودي؟", answer: "35", choices: ["35", "30", "40", "45"] },
        { question: "من هو اللاعب الذي سجل هدف الفوز في نهائي كأس الملك 2017؟", answer: "ياسر الشهراني", choices: ["ياسر الشهراني", "ياسر القحطاني", "نواف العابد", "سالم الدوسري"] },
        { question: "ما هو عدد المباريات التي لعبها سلمان الفرج في دوري المحترفين السعودي؟", answer: "165", choices: ["165", "160", "170", "175"] },
        { question: "ما هو عدد المباريات التي لعبها ياسر الشهراني في دوري المحترفين السعودي؟", answer: "175", choices: ["175", "170", "180", "185"] },
        { question: "ما هو عدد الأهداف التي سجلها محمد الشلهوب في دوري المحترفين السعودي؟", answer: "40", choices: ["40", "35", "45", "50"] },
        { question: "من هو اللاعب الذي سجل هدف الفوز في نهائي دوري أبطال آسيا 2000؟", answer: "سامي الجابر", choices: ["سامي الجابر", "يوسف الثنيان", "ياسر القحطاني", "نواف العابد"] },
        { question: "ما هو عدد الأهداف التي سجلها بافيتيمبي غوميز في دوري المحترفين السعودي؟", answer: "35", choices: ["35", "30", "40", "45"] },
        { question: "من هو اللاعب الذي سجل هدف الفوز في نهائي كأس الملك 2019؟", answer: "سالم الدوسري", choices: ["سالم الدوسري", "بافيتيمبي غوميز", "ياسر القحطاني", "ناصر الشمراني"] },
        { question: "ما هو عدد المباريات التي لعبها عبد الله عطيف في دوري المحترفين السعودي؟", answer: "140", choices: ["140", "135", "145", "150"] },
        { question: "ما هو عدد الأهداف التي سجلها ناصر الدوسري في دوري المحترفين السعودي؟", answer: "4", choices: ["4", "3", "5", "6"] }
    ];

    let currentQuestionIndex = 0;
    let score = 0;

    registrationForm.addEventListener('submit', (event) => {
        event.preventDefault();
        alert('تم التسجيل بنجاح');
        registrationForm.parentElement.classList.add('hidden');
        quizSection.classList.remove('hidden');
        showNextQuestion();
    });

    submitAnswerButton.addEventListener('click', () => {
        const selectedChoice = document.querySelector('input[name="choice"]:checked');
        if (selectedChoice) {
            const answer = selectedChoice.value;
            if (answer === questions[currentQuestionIndex].answer) {
                score++;
                feedbackDiv.textContent = 'إجابة صحيحة!';
            } else {
                feedbackDiv.textContent = `إجابة خاطئة! الإجابة الصحيحة هي: ${questions[currentQuestionIndex].answer}`;
            }
            currentQuestionIndex++;
            showNextQuestion();
        } else {
            feedbackDiv.textContent = 'يرجى اختيار إجابة.';
        }
    });

    function showNextQuestion() {
        if (currentQuestionIndex < questions.length) {
            questionDiv.textContent = questions[currentQuestionIndex].question;
            choicesDiv.innerHTML = '';
            questions[currentQuestionIndex].choices.forEach(choice => {
                const choiceElement = document.createElement('div');
                choiceElement.innerHTML = `
                    <input type="radio" name="choice" value="${choice}" id="choice_${choice}">
                    <label for="choice_${choice}">${choice}</label>
                `;
                choicesDiv.appendChild(choiceElement);
            });
            feedbackDiv.textContent = '';
        } else {
            questionDiv.textContent = "لقد انتهيت من الاختبار! مجموع نقاطك: " + score;
            choicesDiv.innerHTML = '';
            submitAnswerButton.disabled = true;
        }
    }

    // Simulate fetching top fans from a server
    const topFans = [
        { name: "Fan 1", score: 100 },
        { name: "Fan 2", score: 95 },
        { name: "Fan 3", score: 90 },
        { name: "Fan 4", score: 85 },
        { name: "Fan 5", score: 80 },
        { name: "Fan 6", score: 75 },
        { name: "Fan 7", score: 70 },
        { name: "Fan 8", score: 65 },
        { name: "Fan 9", score: 60 },
        { name: "Fan 10", score: 55 }
    ];

    topFans.forEach(fan => {
        const li = document.createElement('li');
        li.textContent = `${fan.name} - ${fan.score} نقاط`;
        topFansOl.appendChild(li);
    });
});
